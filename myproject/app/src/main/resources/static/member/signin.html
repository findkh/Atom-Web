<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>로그인</title>
</head>
<body>

<h1>로그인</h1>
<form name="SigninForm">
<div>
이메일 : <input name="email" type="email"><br>
암호 : <input name="password" type="password"><br>
</div>
<div>
<a href="/member/signup.html">회원가입</a>
</div>
<button id="addBtn">로그인</button>
<button id="cancleBtn" type="button">취소</button>
</form>

<script>
var Email = document.querySelector("input[name=email]");
var PassWord = document.querySelector("input[name=password]");

document.querySelector("form[name=SigninForm]").onsubmit = function() {
  if (Email.value == "" ||
      PassWord.value == "") {
      window.alert("필수 입력 항목이 비어있습니다.")
      return false;
  }
  var fd = new FormData(document.forms.namedItem("SigninForm"));

  fetch("/member/signin", {
    method : "POST",
    body : new URLSearchParams(fd)
  })
  .then(function(response) {
    return response.text();
  })
  .then(function(text) {
    if (text == "success") {
      location.href="../index.html";
    } else {
      window.alert("로그인 실패!");
    }
  })
  return false;
}



document.querySelector("#cancleBtn").onclick = function() {
  window.location.href = "index.html";
};

</script>

</body>
</html>